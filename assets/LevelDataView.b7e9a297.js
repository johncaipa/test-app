import{h as E}from"./moment.9709ab41.js";import{D,E as F,r as d,w as M,J as _,M as Y,N as o,n as e,O as B,S as Z,aA as N,H as O,K as y,L as g,G as H,o as U,R as s,F as z,P,Q as j,U as w,aC as G}from"./index.ff394acc.js";import{V as J,a as m}from"./VRow.00f5d814.js";import{V as k}from"./VSelect.d5e1e008.js";import{V as I}from"./VTextField.b2d1caa6.js";import{V as $}from"./VBtn.83abfb40.js";import{V as K}from"./VContainer.622877ba.js";import{V as A}from"./VCard.2f332c49.js";import{V as Q}from"./VTable.1faf1afd.js";import"./position.fd038f5b.js";import"./forwardRefs.79ff07dd.js";import"./VOverlay.dce51c6b.js";import"./router.cdd901b3.js";import"./VAvatar.e0eed31d.js";const W={__name:"ChartSelect",setup(C){const r=D(),{getStationsInfo:i,enableAlert:c,NOTIFICATION:p}=F(r),{fetchStationInfo:u,fetchChartSeries:t,fetchStationEvents:a}=r,b=d([]),L=d([{title:"1 d\xEDa",value:"lastDay"},{title:"7 d\xEDas",value:"lastWeek"},{title:"15 d\xEDas",value:"last15Days"},{title:"30 d\xEDas",value:"lastMonth"},{title:"Rango",value:"Rango"}]);let R=E();const V=d(R.format("YYYY-MM-DD")),x=d(E(R).add(-15,"days").format("YYYY-MM-DD")),f=d(null),l=d("lastMonth"),S=d(!0);M(i,async v=>{v.forEach(n=>{b.value.push({title:n.name,value:n})}),await u(v[0]._id),await t({id:v[0]._id,name:v[0].name,page:1,limit:500,interval:l.value}),await a({id:v[0]._id,page:1,limit:5,interval:l.value})}),M(l,v=>{l.value==="Rango"?S.value=!1:S.value=!0});const T=async()=>{f.value?(await u(f.value._id),await t({id:f.value._id,name:f.value.name,page:1,limit:500,interval:l.value==="Rango"?null:l.value,startDate:l.value==="Rango"?x.value:null,endDate:l.value==="Rango"?V.value:null}),await a({id:f.value._id,page:1,limit:5,interval:l.value==="Rango"?null:l.value,startDate:l.value==="Rango"?x.value:null,endDate:l.value==="Rango"?V.value:null})):(p.value.color="error",p.value.text="Seleccione una Estaci\xF3n.",c.value=!0)};return(v,n)=>(_(),Y(K,null,{default:o(()=>[e(J,null,{default:o(()=>[e(m,{cols:"12",md:"4"},{default:o(()=>[e(k,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=h=>f.value=h),items:b.value,label:"Estaci\xF3n",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e(k,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=h=>l.value=h),items:L.value,label:"Periodo",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e(I,{modelValue:x.value,"onUpdate:modelValue":n[2]||(n[2]=h=>x.value=h),label:"Fecha Ini.",type:"date",density:"compact",disabled:S.value},null,8,["modelValue","disabled"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e(I,{modelValue:V.value,"onUpdate:modelValue":n[3]||(n[3]=h=>V.value=h),label:"Fecha Fin",type:"date",density:"compact",disabled:S.value},null,8,["modelValue","disabled"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e($,{type:"submit",block:"",class:"mt-2",onClick:B(T,["stop"])},{default:o(()=>[Z("Consultar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}))}},q={__name:"LevelDataChart",setup(C){const r=D(),{getStationInfo:i,getLevelSeries:c,levelSeries:p}=F(r),u=d({chart:{id:"level-data-chart",locales:[{name:"es",options:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dec"],days:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],shortDays:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"],toolbar:{download:"Descargar SVG",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reiniciar Zoom"}}}],defaultLocale:"es"},xaxis:{type:"datetime",labels:{datetimeUTC:!1}},yaxis:{min:0,title:{text:"Nivel (m)"}},title:{text:"Tendencia Estaci\xF3n",align:"center"},tooltip:{x:{show:!0,format:"MMM dd, yyyy HH:mm",formatter:void 0},y:{formatter:t=>t+"m",title:{formatter:t=>t}}},dataLabels:{enabled:!1},stroke:{width:2,curve:"smooth"}});return M(i,t=>{let a;a="Tendencia Estaci\xF3n: "+t.name,u.value={title:{text:a},annotations:{yaxis:[{y:t.levelRedAlarm,borderColor:"#FF4560",label:{borderColor:"##FF4560",style:{color:"#fff",background:"#FF4560"},text:"Alerta Roja"}},{y:t.levelOrangeAlarm,borderColor:"#FEB019",label:{borderColor:"#FEB019",style:{color:"#fff",background:"#FEB019"},text:"Alerta Naranja"}},{y:t.levelYellowAlarm,borderColor:"#ffea00",label:{borderColor:"#ffea00",style:{color:"#fff",background:"#ffea00"},text:"Alerta Amarilla"}}]}}}),N(()=>{p.value=[]}),(t,a)=>{const b=O("apexchart");return _(),y("div",null,[e(b,{width:"100%",height:"400",type:"area",options:u.value,series:g(c)},null,8,["options","series"])])}}},X={__name:"BattDataChart",setup(C){const r=D(),{getStationInfo:i,getBattSeries:c,battSeries:p}=F(r),u=d({chart:{id:"bat-data-chart",locales:[{name:"es",options:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dec"],days:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],shortDays:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"],toolbar:{download:"Descargar SVG",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reiniciar Zoom"}}}],defaultLocale:"es"},colors:["#FF9800","#66DA26","#546E7A","#E91E63","#FF9800"],xaxis:{type:"datetime",labels:{datetimeUTC:!1}},yaxis:{title:{text:"Voltaje Bater\xEDa (V)"}},title:{text:"Tendencia Estaci\xF3n",align:"center"},tooltip:{x:{show:!0,format:"MMM dd, yyyy HH:mm",formatter:void 0},y:{formatter:t=>t+"V",title:{formatter:t=>t}}},dataLabels:{enabled:!1},stroke:{width:2,curve:"straight"}});return M(i,t=>{let a;a="Tendencia Estaci\xF3n: "+t.name,u.value={title:{text:a}}}),N(()=>{p.value=[]}),(t,a)=>{const b=O("apexchart");return _(),y("div",null,[e(b,{width:"100%",height:"300",type:"line",options:u.value,series:g(c)},null,8,["options","series"])])}}},ee=s("div",null,[s("h1",{align:"center"},"Estaciones Hidroclim\xE1ticas IoT")],-1),te=s("div",{align:"center"},[s("strong",null,"\xDAltimas Alarmas Reportadas")],-1),ae=s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Fecha "),s("th",{class:"text-left"}," Estado "),s("th",{class:"text-left"}," Nivel ")])],-1),oe={key:0},be={__name:"LevelDataView",setup(C){H();const r=D(),{getEvents:i}=F(r),{fetchStationsInfo:c}=r;return U(async()=>{await c()}),(p,u)=>(_(),y("div",null,[ee,e(J,{"no-gutters":""},{default:o(()=>[e(m,{cols:"12",sm:"12",md:"12"},{default:o(()=>[e(A,{class:"ma-2"},{default:o(()=>[e(W),e(q)]),_:1})]),_:1}),e(m,{cols:"12",sm:"12",md:"4"},{default:o(()=>[e(A,{height:"315px",class:"ma-2"},{default:o(()=>[te,e(Q,{density:"compact"},{default:o(()=>{var t;return[ae,((t=g(i))==null?void 0:t.alarms)&&g(i).alarms.length!==0?(_(),y("tbody",oe,[(_(!0),y(z,null,P(g(i).alarms,a=>(_(),y("tr",{key:a.timestamp},[s("td",null,w(g(E)(a.timestamp).locale("es").format("MMM DD, YYYY HH:mm")),1),s("td",{style:G({"text-shadow":"2px 2px "+a.colorAlarm})},w(a.status),5),s("td",null,w(a.level),1)]))),128))])):j("",!0)]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"12",md:"8"},{default:o(()=>[e(A,{class:"ma-2"},{default:o(()=>[e(X)]),_:1})]),_:1})]),_:1})]))}};export{be as default};
