import{m as T,r as f,n as e,aI as h,G as x,D as C,E as A,J as F,M as I,N as t,S as g,O as q,R as p,U as w}from"./index.ff394acc.js";import{V as B}from"./VContainer.622877ba.js";import{a as _,V as y}from"./VRow.00f5d814.js";import{V as N,a as U,b as k}from"./VCard.2f332c49.js";import{V as D,b as P,a as S}from"./VSpacer.37910249.js";import{V as j}from"./VSheet.0307597a.js";import{b as E,c as M,V as R}from"./VTextField.b2d1caa6.js";import{f as O}from"./forwardRefs.79ff07dd.js";import{u as z}from"./position.fd038f5b.js";import{V as H}from"./VBtn.83abfb40.js";import"./VAvatar.e0eed31d.js";import"./router.cdd901b3.js";const Z=T()({name:"VForm",props:{...E()},emits:{"update:modelValue":m=>!0,submit:m=>!0},setup(m,v){let{slots:i,emit:V}=v;const u=M(m),n=f();function b(a){a.preventDefault(),u.reset()}function c(a){const r=a,o=u.validate();r.then=o.then.bind(o),r.catch=o.catch.bind(o),r.finally=o.finally.bind(o),V("submit",r),r.defaultPrevented||o.then(l=>{var d;let{valid:s}=l;s&&((d=n.value)==null||d.submit())}),r.preventDefault()}return z(()=>{var a;return e("form",{ref:n,class:"v-form",novalidate:!0,onReset:b,onSubmit:c},[(a=i.default)==null?void 0:a.call(i,u)])}),O(u,n)}}),$=p("a",{href:"#",class:"text-body-2 font-weight-regular"},"Forgot Password?",-1),oe={__name:"LoginView",setup(m){h();const v=x(),i=C(),{getUser:V,enableAlert:u,NOTIFICATION:n}=A(i),{authUser:b}=i,c=f("Sogamoso"),a=f({username:null,password:null}),r=f({required:l=>!!l||"Requerido",email:l=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(l)||"e-mail invalido"}),o=async()=>{try{a.value.username&&a.value.password&&(console.log("submit"),await b(a.value),a.value.username=null,a.value.password=null,n.value.color="success",n.value.text=`Bienvenido ${V.value.username}!`,u.value=!0,v.push({name:"Home"}))}catch(l){console.log(l),l==="Invalid grant: user credentials are invalid"&&(n.value.color="error",n.value.text="Usuario y/o contrase\xF1a invalido.",u.value=!0)}};return(l,s)=>(F(),I(B,{fluid:""},{default:t(()=>[e(y,{"no-gutters":"",align:"center",justify:"center"},{default:t(()=>[e(_,{cols:"12",sm:"8",md:"4"},{default:t(()=>[e(N,{class:"elevation-12"},{default:t(()=>[e(D,{color:"green",dark:"",flat:""},{default:t(()=>[e(P,null,{default:t(()=>[g("Iniciar Sesi\xF3n")]),_:1})]),_:1}),e(j,{class:"pa-2"},{default:t(()=>[e(Z,{"fast-fail":"",onSubmit:s[2]||(s[2]=q(()=>o(),["prevent"]))},{default:t(()=>[e(U,null,{default:t(()=>[e(R,{modelValue:a.value.username,"onUpdate:modelValue":s[0]||(s[0]=d=>a.value.username=d),label:"Email",name:"username",required:"","prepend-icon":"mdi-account",type:"text",rules:[r.value.required,r.value.email]},null,8,["modelValue","rules"]),e(R,{modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=d=>a.value.password=d),id:"password",label:"Contrase\xF1a",name:"password",required:"","prepend-icon":"mdi-lock",type:"password",rules:[r.value.required]},null,8,["modelValue","rules"]),$]),_:1}),e(k,null,{default:t(()=>[e(S),e(H,{type:"submit",variant:"elevated",color:"green"},{default:t(()=>[g("Iniciar Sesi\xF3n")]),_:1}),e(S)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{align:"center",justify:"center"},{default:t(()=>[e(_,{cols:"12",sm:"8",md:"8",align:"center",justify:"center"},{default:t(()=>[p("div",null,[p("h2",null,"SAT "+w(c.value),1),p("p",null," Plataforma Web Red de Estaciones Hidrometeorol\xF3gicas Sistema de Alerta Temprana Municipio de "+w(c.value)+" Boyac\xE1 ",1)])]),_:1})]),_:1})]),_:1}))}};export{oe as default};
