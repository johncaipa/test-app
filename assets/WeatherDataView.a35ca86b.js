import{h as R}from"./moment.9709ab41.js";import{D,E,r as m,w as M,J as _,M as Y,N as o,n as t,O as B,S as L,aA as k,H as T,K as b,L as g,G as Z,o as P,R as s,F as H,P as U,Q as z,U as C,aC as G}from"./index.ff394acc.js";import{V as W,a as d}from"./VRow.00f5d814.js";import{V as I}from"./VSelect.d5e1e008.js";import{V as N}from"./VTextField.b2d1caa6.js";import{V as $}from"./VBtn.83abfb40.js";import{V as K}from"./VContainer.622877ba.js";import{V as F}from"./VCard.2f332c49.js";import{V as Q}from"./VTable.1faf1afd.js";import"./position.fd038f5b.js";import"./forwardRefs.79ff07dd.js";import"./VOverlay.dce51c6b.js";import"./router.cdd901b3.js";import"./VAvatar.e0eed31d.js";const j={__name:"WSChartSelect",setup(w){const n=D(),{getWeatherStationsInfo:i,enableAlert:c,NOTIFICATION:p}=E(n),{fetchWeatherStationInfo:u,fetchWeatherChartSeries:e,fetchWeatherStationEvents:a}=n,y=m([]),J=m([{title:"1 d\xEDa",value:"lastDay"},{title:"7 d\xEDas",value:"lastWeek"},{title:"15 d\xEDas",value:"last15Days"},{title:"30 d\xEDas",value:"lastMonth"},{title:"Rango",value:"Rango"}]);let A=R();const V=m(A.format("YYYY-MM-DD")),S=m(R(A).add(-15,"days").format("YYYY-MM-DD")),f=m(null),l=m("lastMonth"),x=m(!0);M(i,async h=>{h.forEach(r=>{y.value.push({title:r.name,value:r})}),await u(h[0]._id),await e({id:h[0]._id,name:h[0].name,page:1,limit:500,interval:l.value}),await a({id:h[0]._id,page:1,limit:5,interval:l.value})}),M(l,h=>{l.value==="Rango"?x.value=!1:x.value=!0});const O=async()=>{f.value?(await u(f.value._id),await e({id:f.value._id,name:f.value.name,page:1,limit:500,interval:l.value==="Rango"?null:l.value,startDate:l.value==="Rango"?S.value:null,endDate:l.value==="Rango"?V.value:null}),await a({id:f.value._id,page:1,limit:5,interval:l.value==="Rango"?null:l.value,startDate:l.value==="Rango"?S.value:null,endDate:l.value==="Rango"?V.value:null})):(p.value.color="error",p.value.text="Seleccione una Estaci\xF3n.",c.value=!0)};return(h,r)=>(_(),Y(K,null,{default:o(()=>[t(W,null,{default:o(()=>[t(d,{cols:"12",md:"4"},{default:o(()=>[t(I,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=v=>f.value=v),items:y.value,label:"Estaci\xF3n",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"2"},{default:o(()=>[t(I,{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=v=>l.value=v),items:J.value,label:"Periodo",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"2"},{default:o(()=>[t(N,{modelValue:S.value,"onUpdate:modelValue":r[2]||(r[2]=v=>S.value=v),label:"Fecha Ini.",type:"date",density:"compact",disabled:x.value},null,8,["modelValue","disabled"])]),_:1}),t(d,{cols:"12",md:"2"},{default:o(()=>[t(N,{modelValue:V.value,"onUpdate:modelValue":r[3]||(r[3]=v=>V.value=v),label:"Fecha Fin",type:"date",density:"compact",disabled:x.value},null,8,["modelValue","disabled"])]),_:1}),t(d,{cols:"12",md:"2"},{default:o(()=>[t($,{type:"submit",block:"",class:"mt-2",onClick:B(O,["stop"])},{default:o(()=>[L("Consultar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}))}},q={__name:"WeatherDataChart",setup(w){const n=D(),{getWeatherStationInfo:i,getWeatherSeries:c,weatherSeries:p}=E(n),u=m({chart:{id:"level-data-chart",stacked:!1,locales:[{name:"es",options:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dec"],days:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],shortDays:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"],toolbar:{download:"Descargar SVG",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reiniciar Zoom"}}}],defaultLocale:"es"},colors:["#008FFB","#FEB019","#00E396","#546E7A","#E91E63","#9C27B0","#4576b5","#41B883"],fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.45,opacityTo:.05,stops:[20,100,100,100]}},stroke:{width:[2,2,2],curve:"smooth"},xaxis:{type:"datetime",labels:{datetimeUTC:!1}},yaxis:[{seriesName:"Precipitaci\xF3n",title:{text:"Precipitaci\xF3n (mm/h)"},min:0},{seriesName:"Rad.Solar",opposite:!0,title:{text:"Rad.Solar (W/m2)"}},{seriesName:"Vel.Viento",opposite:!0,title:{text:"Vel.Viento (m/s)"}}],title:{text:"Tendencia Estaci\xF3n",align:"center"},tooltip:{shared:!0,x:{show:!0,format:"MMM dd, yyyy HH:mm",formatter:void 0},y:[{formatter:e=>e+"mm/h",title:{formatter:e=>e}},{formatter:e=>e+"W/m2",title:{formatter:e=>e}},{formatter:e=>e+"m/s",title:{formatter:e=>e}}]},dataLabels:{enabled:!1}});return M(i,e=>{let a;a="Tendencia Estaci\xF3n: "+e.name,u.value={title:{text:a}}}),k(()=>{p.value=[]}),(e,a)=>{const y=T("apexchart");return _(),b("div",null,[t(y,{width:"100%",height:"400",type:"area",options:u.value,series:g(c)},null,8,["options","series"])])}}},X={__name:"AmbientDataChart",setup(w){const n=D(),{getWeatherStationInfo:i,getAmbientSeries:c,ambientSeries:p}=E(n),u=m({chart:{id:"level-data-chart",stacked:!1,locales:[{name:"es",options:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dec"],days:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],shortDays:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"],toolbar:{download:"Descargar SVG",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reiniciar Zoom"}}}],defaultLocale:"es"},colors:["#FF9800","#008FFB","#00E396","#E91E63","#FF9800"],stroke:{width:[2,2,2],curve:"smooth"},xaxis:{type:"datetime",labels:{datetimeUTC:!1}},yaxis:[{title:{text:"Temperatura (\xB0C)"}},{opposite:!0,title:{text:"Humedad Relativa (%)"}},{opposite:!0,min:700,max:800,title:{text:"Presi\xF3n Atmos. (hPa)"}}],title:{text:"Tendencia Estaci\xF3n",align:"center"},tooltip:{shared:!0,x:{show:!0,format:"MMM dd, yyyy HH:mm",formatter:void 0},y:[{formatter:e=>e+"\xB0C",title:{formatter:e=>e}},{formatter:e=>e+"%",title:{formatter:e=>e}},{formatter:e=>e+"hPa",title:{formatter:e=>e}}]},dataLabels:{enabled:!1}});return M(i,e=>{let a;a="Tendencia Estaci\xF3n: "+e.name,u.value={title:{text:a}}}),k(()=>{p.value=[]}),(e,a)=>{const y=T("apexchart");return _(),b("div",null,[t(y,{width:"100%",height:"300",type:"line",options:u.value,series:g(c)},null,8,["options","series"])])}}},ee=s("div",null,[s("h1",{align:"center"},"Estaciones Meteorol\xF3gicas IoT")],-1),te=s("div",{align:"center"},[s("strong",null,"\xDAltimas Alarmas Reportadas")],-1),ae=s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Fecha "),s("th",{class:"text-left"}," Estado "),s("th",{class:"text-left"}," Nivel ")])],-1),oe={key:0},ye={__name:"WeatherDataView",setup(w){Z();const n=D(),{getWeatherEvents:i}=E(n),{fetchWeatherStationsInfo:c}=n;return P(async()=>{await c()}),(p,u)=>(_(),b("div",null,[ee,t(W,{"no-gutters":""},{default:o(()=>[t(d,{cols:"12",sm:"12",md:"12"},{default:o(()=>[t(F,{class:"ma-2"},{default:o(()=>[t(j),t(q)]),_:1})]),_:1}),t(d,{cols:"12",sm:"12",md:"4"},{default:o(()=>[t(F,{height:"315px",class:"ma-2"},{default:o(()=>[te,t(Q,{density:"compact"},{default:o(()=>{var e;return[ae,((e=g(i))==null?void 0:e.alarms)&&g(i).alarms.length!==0?(_(),b("tbody",oe,[(_(!0),b(H,null,U(g(i).alarms,a=>(_(),b("tr",{key:a.timestamp},[s("td",null,C(g(R)(a.timestamp).locale("es").format("MMM DD, YYYY HH:mm")),1),s("td",{style:G({"text-shadow":"2px 2px "+a.colorAlarm})},C(a.status),5),s("td",null,C(a.level),1)]))),128))])):z("",!0)]}),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"12",md:"8"},{default:o(()=>[t(F,{class:"ma-2"},{default:o(()=>[t(X)]),_:1})]),_:1})]),_:1})]))}};export{ye as default};
